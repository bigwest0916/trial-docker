<html>
{% load hs_extra %}
<body>
<p><label>hsヒアリングシート{{max_hs_version}}質問項目(hs2)</label><br>
<form action="" method="post">
    {% csrf_token %}
    <input type="hidden" name="version" value="{{version}}">
    <input type="hidden" name="diagnosis_id" value="{{diagnosis_id}}">

    {% for category in categories %}
    <fieldset>
        {{category.category.category_name}}<br>
        {{category.category.category_desc}}<br>

        {% for q in category.rr %}


        <p><label>★質問{{q.questionmaster.id}}
        {% if q.questionmasterrequired_flg == 1 %}
        <font color="red">必須</font>{% endif %}
        <br><p>質問内容{{q.questionmaster.question_content}}<br>

            <!-- 回答のform がテキストの場合-->
            {% if q.questionmaster.form_type == 1 %}
            <input type="text" name="{{q.questionmaster.id}}" size="100" value="{{q.answer}}"></label>
            {% endif %}

            <!-- 回答のform がcheckboxの場合 -->
            {% if q.questionmaster.form_type == 2 %}
                {%for av in q.questionmaster.answer_values_as_list %}
                   <input type="checkbox" name="{{q.questionmaster.id}}" value="{{av}}"
                          {% if av in q.answer%}
                            checked
                          {% endif %}
                   >{{av}}</label>
                {% endfor %}
            {% endif%}

            <!-- 回答のform がradioの場合 -->
            {% if q.questionmaster.form_type == 3 %}
                {%for av in q.questionmaster.answer_values_as_list %}
                   <input type="radio" name="{{q.questionmaster.id}}" value="{{av}}" {{ av | checked:q.answer }}>{{av}}</label>
                {% endfor %}
            {% endif%}

            <!-- 回答のform がselectの場合 -->
            {% if q.questionmaster.form_type == 5 %}
                <select name="{{q.questionmaster.id}}">
                {%for av in q.questionmaster.answer_values_as_list %}
                    <option value="{{av}}" {{ av | selected:q.answer }}>{{av}}</option>
                {% endfor %}
            {% endif %}
                </select>
        {% endfor %}



    </fieldset>
    {% endfor %}
    <input type="submit" value="登録">
</form>
</body>
</html>